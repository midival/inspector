(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const ze=(t,e)=>t===e,et=Symbol("solid-track"),se={equals:ze};let $e=Fe;const R=1,re=2,je={owned:null,cleanups:null,context:null,owner:null};var v=null;let ge=null,y=null,S=null,M=null,le=0;function ne(t,e){const n=y,s=v,o=t.length===0,i=o?je:{owned:null,cleanups:null,context:null,owner:e===void 0?s:e},r=o?t:()=>t(()=>W(()=>ae(i)));v=i,y=null;try{return Q(r,!0)}finally{y=n,v=s}}function K(t,e){e=e?Object.assign({},se,e):se;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=o=>(typeof o=="function"&&(o=o(n.value)),Ue(n,o));return[Ke.bind(n),s]}function B(t,e,n){const s=ve(t,e,!1,R);Y(s)}function Ge(t,e,n){$e=ot;const s=ve(t,e,!1,R);(!n||!n.render)&&(s.user=!0),M?M.push(s):Y(s)}function tt(t,e,n){n=n?Object.assign({},se,n):se;const s=ve(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,Y(s),Ke.bind(s)}function W(t){if(y===null)return t();const e=y;y=null;try{return t()}finally{y=e}}function nt(t){return v===null||(v.cleanups===null?v.cleanups=[t]:v.cleanups.push(t)),t}function Ke(){if(this.sources&&this.state)if(this.state===R)Y(this);else{const t=S;S=null,Q(()=>ie(this),!1),S=t}if(y){const t=this.observers?this.observers.length:0;y.sources?(y.sources.push(this),y.sourceSlots.push(t)):(y.sources=[this],y.sourceSlots=[t]),this.observers?(this.observers.push(y),this.observerSlots.push(y.sources.length-1)):(this.observers=[y],this.observerSlots=[y.sources.length-1])}return this.value}function Ue(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&Q(()=>{for(let o=0;o<t.observers.length;o+=1){const i=t.observers[o],r=ge&&ge.running;r&&ge.disposed.has(i),(r?!i.tState:!i.state)&&(i.pure?S.push(i):M.push(i),i.observers&&qe(i)),r||(i.state=R)}if(S.length>1e6)throw S=[],new Error},!1)),e}function Y(t){if(!t.fn)return;ae(t);const e=v,n=y,s=le;y=v=t,st(t,t.value,s),y=n,v=e}function st(t,e,n){let s;try{s=t.fn(e)}catch(o){return t.pure&&(t.state=R,t.owned&&t.owned.forEach(ae),t.owned=null),t.updatedAt=n+1,He(o)}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Ue(t,s):t.value=s,t.updatedAt=n)}function ve(t,e,n,s=R,o){const i={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:v,context:null,pure:n};return v===null||v!==je&&(v.owned?v.owned.push(i):v.owned=[i]),i}function oe(t){if(t.state===0)return;if(t.state===re)return ie(t);if(t.suspense&&W(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<le);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===R)Y(t);else if(t.state===re){const s=S;S=null,Q(()=>ie(t,e[0]),!1),S=s}}function Q(t,e){if(S)return t();let n=!1;e||(S=[]),M?n=!0:M=[],le++;try{const s=t();return rt(n),s}catch(s){n||(M=null),S=null,He(s)}}function rt(t){if(S&&(Fe(S),S=null),t)return;const e=M;M=null,e.length&&Q(()=>$e(e),!1)}function Fe(t){for(let e=0;e<t.length;e++)oe(t[e])}function ot(t){let e,n=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[n++]=s:oe(s)}for(e=0;e<n;e++)oe(t[e])}function ie(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const o=s.state;o===R?s!==e&&(!s.updatedAt||s.updatedAt<le)&&oe(s):o===re&&ie(s,e)}}}function qe(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=re,n.pure?S.push(n):M.push(n),n.observers&&qe(n))}}function ae(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),o=n.observers;if(o&&o.length){const i=o.pop(),r=n.observerSlots.pop();s<o.length&&(i.sourceSlots[r]=s,o[s]=i,n.observerSlots[s]=r)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)ae(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function He(t){throw t}const it=Symbol("fallback");function Ne(t){for(let e=0;e<t.length;e++)t[e]()}function ut(t,e,n={}){let s=[],o=[],i=[],r=0,a=e.length>1?[]:null;return nt(()=>Ne(i)),()=>{let f=t()||[],l,u;return f[et],W(()=>{let p=f.length,b,P,c,h,m,I,g,_,T;if(p===0)r!==0&&(Ne(i),i=[],s=[],o=[],r=0,a&&(a=[])),n.fallback&&(s=[it],o[0]=ne(me=>(i[0]=me,n.fallback())),r=1);else if(r===0){for(o=new Array(p),u=0;u<p;u++)s[u]=f[u],o[u]=ne(d);r=p}else{for(c=new Array(p),h=new Array(p),a&&(m=new Array(p)),I=0,g=Math.min(r,p);I<g&&s[I]===f[I];I++);for(g=r-1,_=p-1;g>=I&&_>=I&&s[g]===f[_];g--,_--)c[_]=o[g],h[_]=i[g],a&&(m[_]=a[g]);for(b=new Map,P=new Array(_+1),u=_;u>=I;u--)T=f[u],l=b.get(T),P[u]=l===void 0?-1:l,b.set(T,u);for(l=I;l<=g;l++)T=s[l],u=b.get(T),u!==void 0&&u!==-1?(c[u]=o[l],h[u]=i[l],a&&(m[u]=a[l]),u=P[u],b.set(T,u)):i[l]();for(u=I;u<p;u++)u in c?(o[u]=c[u],i[u]=h[u],a&&(a[u]=m[u],a[u](u))):o[u]=ne(d);o=o.slice(0,r=p),s=f.slice(0)}return o});function d(p){if(i[u]=p,a){const[b,P]=K(u);return a[u]=P,e(f[u],b)}return e(f[u])}}}function w(t,e){return W(()=>t(e||{}))}function xe(t){const e="fallback"in t&&{fallback:()=>t.fallback};return tt(ut(()=>t.each,t.children,e||void 0))}function lt(t,e,n){let s=n.length,o=e.length,i=s,r=0,a=0,f=e[o-1].nextSibling,l=null;for(;r<o||a<i;){if(e[r]===n[a]){r++,a++;continue}for(;e[o-1]===n[i-1];)o--,i--;if(o===r){const u=i<s?a?n[a-1].nextSibling:n[i-a]:f;for(;a<i;)t.insertBefore(n[a++],u)}else if(i===a)for(;r<o;)(!l||!l.has(e[r]))&&e[r].remove(),r++;else if(e[r]===n[i-1]&&n[a]===e[o-1]){const u=e[--o].nextSibling;t.insertBefore(n[a++],e[r++].nextSibling),t.insertBefore(n[--i],u),e[o]=n[i]}else{if(!l){l=new Map;let d=a;for(;d<i;)l.set(n[d],d++)}const u=l.get(e[r]);if(u!=null)if(a<u&&u<i){let d=r,p=1,b;for(;++d<o&&d<i&&!((b=l.get(e[d]))==null||b!==u+p);)p++;if(p>u-a){const P=e[r];for(;a<u;)t.insertBefore(n[a++],P)}else t.replaceChild(n[a++],e[r++])}else r++;else e[r++].remove()}}}function at(t,e,n,s={}){let o;return ne(i=>{o=i,e===document?t():D(e,t(),e.firstChild?null:void 0,n)},s.owner),()=>{o(),e.textContent=""}}function E(t,e,n){let s;const o=()=>{const r=document.createElement("template");return r.innerHTML=t,n?r.content.firstChild.firstChild:r.content.firstChild},i=e?()=>W(()=>document.importNode(s||(s=o()),!0)):()=>(s||(s=o())).cloneNode(!0);return i.cloneNode=i,i}function We(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n)}function k(t,e){e==null?t.removeAttribute("class"):t.className=e}function D(t,e,n,s){if(n!==void 0&&!s&&(s=[]),typeof e!="function")return ue(t,e,s,n);B(o=>ue(t,e(),o,n),s)}function ue(t,e,n,s,o){for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,r=s!==void 0;if(t=r&&n[0]&&n[0].parentNode||t,i==="string"||i==="number")if(i==="number"&&(e=e.toString()),r){let a=n[0];a&&a.nodeType===3?a.data=e:a=document.createTextNode(e),n=$(t,n,s,a)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e;else if(e==null||i==="boolean")n=$(t,n,s);else{if(i==="function")return B(()=>{let a=e();for(;typeof a=="function";)a=a();n=ue(t,a,n,s)}),()=>n;if(Array.isArray(e)){const a=[],f=n&&Array.isArray(n);if(_e(a,e,n,o))return B(()=>n=ue(t,a,n,s,!0)),()=>n;if(a.length===0){if(n=$(t,n,s),r)return n}else f?n.length===0?Me(t,a,s):lt(t,n,a):(n&&$(t),Me(t,a));n=a}else if(e.nodeType){if(Array.isArray(n)){if(r)return n=$(t,n,s,e);$(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}else console.warn("Unrecognized value. Skipped inserting",e)}return n}function _e(t,e,n,s){let o=!1;for(let i=0,r=e.length;i<r;i++){let a=e[i],f=n&&n[i],l;if(!(a==null||a===!0||a===!1))if((l=typeof a)=="object"&&a.nodeType)t.push(a);else if(Array.isArray(a))o=_e(t,a,f)||o;else if(l==="function")if(s){for(;typeof a=="function";)a=a();o=_e(t,Array.isArray(a)?a:[a],Array.isArray(f)?f:[f])||o}else t.push(a),o=!0;else{const u=String(a);f&&f.nodeType===3&&f.data===u?t.push(f):t.push(document.createTextNode(u))}}return o}function Me(t,e,n=null){for(let s=0,o=e.length;s<o;s++)t.insertBefore(e[s],n)}function $(t,e,n,s){if(n===void 0)return t.textContent="";const o=s||document.createTextNode("");if(e.length){let i=!1;for(let r=e.length-1;r>=0;r--){const a=e[r];if(o!==a){const f=a.parentNode===t;!i&&!r?f?t.replaceChild(o,a):t.insertBefore(o,n):f&&a.remove()}else i=!0}}else t.insertBefore(o,n);return[o]}const ct="_App_1jq42_1",ft="_logo_1jq42_6",dt="_header_1jq42_12",ht="_link_1jq42_23",mt={App:ct,logo:ft,"logo-spin":"_logo-spin_1jq42_1",header:dt,link:ht};var O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},be={},ye={},F={},Se={},ce={},J={},Z=O&&O.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},j=O&&O.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},H,N;Object.defineProperty(J,"__esModule",{value:!0});J.OmnibusRegistrator=void 0;class pt{constructor(e){H.set(this,void 0),N.set(this,void 0),Z(this,H,e),Z(this,N,[])}on(e,n){return j(this,H).on(e,n),j(this,N).push({name:e,fn:n}),()=>{this.off(e,n)}}off(e,n){if(!j(this,N).find(o=>o.name===e&&o.fn===n))throw new Error("Event you are trying to unregister was not registered via this Registrator");this.off(e,n),Z(this,N,j(this,N).filter(o=>!(o.name===e&&o.fn===n)))}offAll(){j(this,N).forEach(({name:e,fn:n})=>{j(this,H).off(e,n)}),Z(this,N,[])}}J.OmnibusRegistrator=pt;H=new WeakMap,N=new WeakMap;var Ee=O&&O.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},G=O&&O.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},A;Object.defineProperty(ce,"__esModule",{value:!0});ce.Omnibus=void 0;const It=J;class gt{constructor(){A.set(this,void 0),Ee(this,A,new Map)}on(e,n){return G(this,A).has(e)||G(this,A).set(e,[]),G(this,A).get(e).push(n),()=>{this.off(e,n)}}off(e,n){const s=G(this,A).get(e)||[];G(this,A).set(e,s.filter(o=>o!==n))}offAll(){Ee(this,A,new Map)}async trigger(e,...n){const s=G(this,A).get(e)||[];return Promise.all(s.map(o=>o(...n))).then(()=>{})}getRegistrator(){return new It.OmnibusRegistrator(this)}}ce.Omnibus=gt;A=new WeakMap;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OmnibusRegistrator=t.Omnibus=void 0;const e=ce;Object.defineProperty(t,"Omnibus",{enumerable:!0,get:function(){return e.Omnibus}});const n=J;Object.defineProperty(t,"OmnibusRegistrator",{enumerable:!0,get:function(){return n.OmnibusRegistrator}})})(Se);var C={};Object.defineProperty(C,"__esModule",{value:!0});C.toMidiMessage=C.makeMessage=C.isChannelMode=void 0;const bt=t=>t>=120;C.isChannelMode=bt;const yt=({channel:t,command:e,data1:n,data2:s})=>Uint8Array.from([e+(t-1),n,s]);C.makeMessage=yt;const Ot=([t,e,n])=>{const s=t>>4<<4;return{channel:t-s+1,command:s,data1:e,data2:n}};C.toMidiMessage=Ot;var we={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.splitValueIntoFraction=t.uIntsIntoNumber=t.splitNumberIntoUInt8s=t.fractionToPitchBendAsUints=t.fractionToPitchBend=void 0;const e=r=>{if(r<-1||r>1)throw new Error("Pitch bend value outside the range");return Math.ceil((r+1)*16383/2)};t.fractionToPitchBend=e;const n=r=>(0,t.splitNumberIntoUInt8s)((0,t.fractionToPitchBend)(r));t.fractionToPitchBendAsUints=n;const s=r=>{let a=[];return a[0]=128-1&r,a[1]=r>>7,a};t.splitNumberIntoUInt8s=s;const o=r=>r[0]+(r[1]<<7);t.uIntsIntoNumber=o;const i=r=>((0,t.uIntsIntoNumber)(r)/16363-.5)*2;t.splitValueIntoFraction=i})(we);var X={};Object.defineProperty(X,"__esModule",{value:!0});X.MidiCommand=void 0;X.MidiCommand={NoteOn:144,NoteOff:128,PolyKeyPressure:160,ControlChange:176,ProgramChange:192,ChannelPressure:208,PitchBend:224,Sysex:240,Clock:{Start:250,Continue:251,Stop:252,Pulse:248}};var De={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MidiControlChange=void 0,function(e){e[e.BankSelect=0]="BankSelect",e[e.ModulationWheel=1]="ModulationWheel",e[e.BreathController=2]="BreathController",e[e.FootController=4]="FootController",e[e.PortamentoTile=5]="PortamentoTile",e[e.DataEntryMSB=6]="DataEntryMSB",e[e.ChannelVolume=7]="ChannelVolume",e[e.Balance=8]="Balance",e[e.Pan=10]="Pan",e[e.ExpressionController=11]="ExpressionController",e[e.EffectControl1=12]="EffectControl1",e[e.EffectControl2=13]="EffectControl2",e[e.GeneralPurposeController1=16]="GeneralPurposeController1",e[e.GeneralPurposeController2=17]="GeneralPurposeController2",e[e.GeneralPurposeController3=18]="GeneralPurposeController3",e[e.GeneralPurposeController4=19]="GeneralPurposeController4",e[e.BankSelectLSB=32]="BankSelectLSB",e[e.ModulationWheelLSB=33]="ModulationWheelLSB",e[e.BreathControllerLSB=34]="BreathControllerLSB",e[e.FootControllerLSB=36]="FootControllerLSB",e[e.PortamentoTileLSB=37]="PortamentoTileLSB",e[e.DataEntryLSB=38]="DataEntryLSB",e[e.ChannelVolumeLSB=39]="ChannelVolumeLSB",e[e.BalanceLSB=40]="BalanceLSB",e[e.PanLSB=42]="PanLSB",e[e.ExpressionControllerLSB=43]="ExpressionControllerLSB",e[e.EffectControl1LSB=48]="EffectControl1LSB",e[e.EffectControl2LSB=49]="EffectControl2LSB",e[e.EffectControl3LSB=50]="EffectControl3LSB",e[e.EffectControl4LSB=51]="EffectControl4LSB",e[e.Sustain=64]="Sustain",e[e.Portamento=65]="Portamento",e[e.Sostenuto=66]="Sostenuto",e[e.SoftPedal=67]="SoftPedal",e[e.LegatoFootswitch=68]="LegatoFootswitch",e[e.Hold2=69]="Hold2",e[e.SoundController1=70]="SoundController1",e[e.SoundController2=71]="SoundController2",e[e.SoundController3=72]="SoundController3",e[e.SoundController4=73]="SoundController4",e[e.SoundController5=74]="SoundController5",e[e.SoundController6=75]="SoundController6",e[e.SoundController7=76]="SoundController7",e[e.SoundController8=77]="SoundController8",e[e.SoundController9=78]="SoundController9",e[e.SoundController10=79]="SoundController10",e[e.SoundVariation=70]="SoundVariation",e[e.TimbreIntensitivity=71]="TimbreIntensitivity",e[e.ReleaseTime=72]="ReleaseTime",e[e.AttackTime=73]="AttackTime",e[e.Brightness=74]="Brightness",e[e.DecayTime=75]="DecayTime",e[e.VibratoRate=76]="VibratoRate",e[e.VibratoDepth=77]="VibratoDepth",e[e.VibratoDelay=78]="VibratoDelay",e[e.GeneralPurposeController5=80]="GeneralPurposeController5",e[e.GeneralPurposeController6=81]="GeneralPurposeController6",e[e.GeneralPurposeController7=82]="GeneralPurposeController7",e[e.GeneralPurposeController8=83]="GeneralPurposeController8",e[e.PortamentoControl=84]="PortamentoControl",e[e.HighResolutionVelocityPrefix=88]="HighResolutionVelocityPrefix",e[e.Effects1Depth=91]="Effects1Depth",e[e.Effects2Depth=92]="Effects2Depth",e[e.Effects3Depth=93]="Effects3Depth",e[e.Effects4Depth=94]="Effects4Depth",e[e.Effects5Depth=95]="Effects5Depth",e[e.DataIncrement=96]="DataIncrement",e[e.DataDecrement=97]="DataDecrement",e[e.NonRegisteredParameterNumberLSB=98]="NonRegisteredParameterNumberLSB",e[e.NonRegisteredParameterNumberMSB=99]="NonRegisteredParameterNumberMSB",e[e.RegisteredParameterNumberLSB=100]="RegisteredParameterNumberLSB",e[e.RegisteredParameterNumberMSB=101]="RegisteredParameterNumberMSB",e[e.AllSoundsOff=120]="AllSoundsOff",e[e.ResetAllControllers=121]="ResetAllControllers",e[e.LocalControlOnOff=122]="LocalControlOnOff",e[e.AllNotesOff=123]="AllNotesOff",e[e.OmniModeOff=124]="OmniModeOff",e[e.OmniModeOn=125]="OmniModeOn",e[e.MonoModeOn=126]="MonoModeOn",e[e.PolyModeOn=127]="PolyModeOn"}(t.MidiControlChange||(t.MidiControlChange={}))})(De);var Ye={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ticksToBPM=t.quarternoteToBPM=t.averageIntervals=t.computeIntervalsInMs=void 0;const e=(r,a)=>r+a,n=r=>{const a=[];for(let f=1;f<r.length;f++)a.push(r[f]-r[f-1]);return a};t.computeIntervalsInMs=n;const s=r=>!r||!r.length?0:r.reduce(e)/r.length;t.averageIntervals=s;const o=r=>6e4/(r*24);t.quarternoteToBPM=o;const i=r=>!r||r.length<2?0:(0,t.quarternoteToBPM)((0,t.averageIntervals)((0,t.computeIntervalsInMs)(r)));t.ticksToBPM=i})(Ye);var U={};Object.defineProperty(U,"__esModule",{value:!0});U.MIDIValConfigurationError=U.MIDIValError=void 0;class Qe extends Error{constructor(e){super(e)}get name(){return this.constructor.name}}U.MIDIValError=Qe;class _t extends Qe{}U.MIDIValConfigurationError=_t;var V={};Object.defineProperty(V,"__esModule",{value:!0});V.toProgramMessage=V.toControlChangeMessage=V.toNoteMessage=void 0;const Pt=t=>Object.assign(Object.assign({},t),{note:t.data1,velocity:t.data2});V.toNoteMessage=Pt;const vt=t=>Object.assign(Object.assign({},t),{control:t.data1,value:t.data2});V.toControlChangeMessage=vt;const St=t=>Object.assign(Object.assign({},t),{program:t.data1,value:t.data2});V.toProgramMessage=St;var Be={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toRegisteredParameterKey=t.MIDIRegisteredParameters=void 0,t.MIDIRegisteredParameters={PITCH_BEND_SENSITIVITY:[0,0],CHANNEL_FINE_TUNING:[0,1],CHANNEL_COARSE_TUNING:[0,2],TUNING_PROGRAM_CHANGE:[0,3],TUNING_BANK_SELECT:[0,4],MODULATION_DEPTH_CHANGE:[0,5],MPE_CONFIGURATION_MESSAGE:[0,6]};const e=n=>{for(const[s,o]of Object.entries(t.MIDIRegisteredParameters))if(o[0]===n[0]&&o[1]===n[1])return s;throw new Error("Unknown registered parameter")};t.toRegisteredParameterKey=e})(Be);var Te;function Je(){if(Te)return F;Te=1;var t=O&&O.__awaiter||function(P,c,h,m){function I(g){return g instanceof h?g:new h(function(_){_(g)})}return new(h||(h=Promise))(function(g,_){function T(L){try{pe(m.next(L))}catch(Ie){_(Ie)}}function me(L){try{pe(m.throw(L))}catch(Ie){_(Ie)}}function pe(L){L.done?g(L.value):I(L.value).then(T,me)}pe((m=m.apply(P,c||[])).next())})};Object.defineProperty(F,"__esModule",{value:!0}),F.MIDIValInput=void 0;const e=Se,n=C,s=Ae(),o=we,i=X,r=De,a=Ye,f=U,l=V,u=Be,d=20,p={computeClockTempo:!1};let b=class Pe{constructor(c,h=p){this.rpn=[-1,-1],this.omnibus=new e.Omnibus,this.tempoSamples=[],this.registerInput(c),this.options=h}static fromInterfaceId(c,h){return t(this,void 0,void 0,function*(){const I=(yield this.getMidiAccess()).inputs.find(({id:g})=>g===c);if(!I)throw new f.MIDIValError(`${c} not found`);return new Pe(I,h)})}static fromInterfaceName(c,h){return t(this,void 0,void 0,function*(){const I=(yield this.getMidiAccess()).inputs.find(({name:g})=>g===c);if(!I)throw new f.MIDIValError(`${c} not found`);return new Pe(I,h)})}static getMidiAccess(){return t(this,void 0,void 0,function*(){return yield s.MIDIVal.connect()})}get tempo(){if(!this.options.computeClockTempo)throw new f.MIDIValConfigurationError("To use MIDIValInput.tempo you need to enable computeClockTempo option.");return(0,a.ticksToBPM)(this.tempoSamples)}registerInput(c){return t(this,void 0,void 0,function*(){if(this.midiInput=c,this.unregisterInput=yield c.onMessage(h=>{if(h.data[0]===240){this.omnibus.trigger("sysex",h.data);return}if(this.isClockCommand(h))return;const m=(0,n.toMidiMessage)(h.data);switch(m.command){case i.MidiCommand.NoteOn:this.omnibus.trigger("noteOn",(0,l.toNoteMessage)(m));break;case i.MidiCommand.NoteOff:this.omnibus.trigger("noteOff",(0,l.toNoteMessage)(m));break;case i.MidiCommand.ControlChange:this.omnibus.trigger("controlChange",(0,l.toControlChangeMessage)(m));break;case i.MidiCommand.ProgramChange:this.omnibus.trigger("programChange",(0,l.toProgramMessage)(m));break;case i.MidiCommand.PolyKeyPressure:this.omnibus.trigger("polyKeyPressure",m);break;case i.MidiCommand.PitchBend:this.omnibus.trigger("pitchBend",{channel:m.channel,value:(0,o.splitValueIntoFraction)([m.data1,m.data2])});break;case i.MidiCommand.ChannelPressure:this.omnibus.trigger("channelPressure",m);break;default:console.log("unknown msg",m);break}}),this.options.computeClockTempo){this.onClockPulse(()=>{this.tempoSamples.push(performance.now()),this.tempoSamples.length>d&&this.tempoSamples.shift()});const h=()=>{this.tempoSamples=[]};this.onClockContinue(h),this.onClockStart(h)}this.onControlChange(r.MidiControlChange.RegisteredParameterNumberMSB,h=>{this.rpn=[h.data2,this.rpn[1]]}),this.onControlChange(r.MidiControlChange.RegisteredParameterNumberLSB,h=>{this.rpn=[this.rpn[0],h.data2]}),this.onControlChange(r.MidiControlChange.DataEntryMSB,h=>{const m=(0,u.toRegisteredParameterKey)(this.rpn);this.omnibus.trigger("registeredParameterData",{channel:h.channel,parameter:m,msb:h.data2,lsb:null})}),this.onControlChange(r.MidiControlChange.DataEntryLSB,h=>{const m=(0,u.toRegisteredParameterKey)(this.rpn);this.omnibus.trigger("registeredParameterData",{channel:h.channel,parameter:m,msb:null,lsb:h.data2})})})}isClockCommand(c){switch(c.data[0]){case i.MidiCommand.Clock.Pulse:return this.omnibus.trigger("clockPulse"),!0;case i.MidiCommand.Clock.Start:return this.omnibus.trigger("clockStart"),!0;case i.MidiCommand.Clock.Continue:return this.omnibus.trigger("clockContinue"),!0;case i.MidiCommand.Clock.Stop:return this.omnibus.trigger("clockStop"),!0;default:return!1}}onBusKeyValue(c,h,m,I){return this.omnibus.on(c,(...g)=>{if(!g.length)return;const _=g[0];_[h]===m&&I(_)})}disconnect(){this.omnibus.offAll(),this.unregisterInput&&this.unregisterInput()}onAllNoteOn(c){return this.omnibus.on("noteOn",c)}onNoteOn(c,h){return this.omnibus.on("noteOn",m=>{if(m.note===c)return h(m)})}onAllNoteOff(c){return this.omnibus.on("noteOff",c)}onNoteOff(c,h){return this.onBusKeyValue("noteOff","note",c,h)}onPitchBend(c){return this.omnibus.on("pitchBend",c)}onAllControlChange(c){return this.omnibus.on("controlChange",c)}onControlChange(c,h){return(0,n.isChannelMode)(c)&&console.warn("use designated Channel Mode callback instead of onControlChange for "+c),this.omnibus.on("controlChange",m=>{m.control===c&&h(m)})}onAllProgramChange(c){return this.omnibus.on("programChange",c)}onProgramChange(c,h){return this.onBusKeyValue("programChange","program",c,h)}onAllPolyKeyPressure(c){return this.omnibus.on("polyKeyPressure",c)}onPolyKeyPressure(c,h){return this.onBusKeyValue("polyKeyPressure","data1",c,h)}onSysex(c){return this.omnibus.on("sysex",c)}onAllSoundsOff(c){return this.onBusKeyValue("controlChange","control",r.MidiControlChange.AllSoundsOff,c)}onResetAllControllers(c){return this.onBusKeyValue("controlChange","control",r.MidiControlChange.ResetAllControllers,c)}onLocalControlChange(c){return this.onBusKeyValue("controlChange","control",r.MidiControlChange.LocalControlOnOff,h=>{c(h.data2===127,h)})}onAllNotesOff(c){return this.onBusKeyValue("controlChange","control",r.MidiControlChange.AllNotesOff,c)}onChannelPressure(c){return this.omnibus.on("channelPressure",c)}onOmniModeOff(c){return this.onBusKeyValue("controlChange","control",r.MidiControlChange.OmniModeOff,c)}onOmniModeOn(c){return this.onBusKeyValue("controlChange","control",r.MidiControlChange.OmniModeOn,c)}onMonoModeOn(c){return this.onBusKeyValue("controlChange","control",r.MidiControlChange.MonoModeOn,c)}onPolyModeOn(c){return this.onBusKeyValue("controlChange","control",r.MidiControlChange.PolyModeOn,c)}onClockPulse(c){return this.omnibus.on("clockPulse",c)}onClockStart(c){return this.omnibus.on("clockStart",c)}onClockStop(c){return this.omnibus.on("clockStop",c)}onClockContinue(c){return this.omnibus.on("clockContinue",c)}onMpeConfiguration(c){return this.onBusKeyValue("registeredParameterData","parameter","MPE_CONFIGURATION_MESSAGE",c)}onPitchBendSensitivity(c){return this.onBusKeyValue("registeredParameterData","parameter","PITCH_BEND_SENSITIVITY",c)}onChannelFineTuning(c){return this.onBusKeyValue("registeredParameterData","parameter","CHANNEL_FINE_TUNING",c)}onChannelCoarseTuning(c){return this.onBusKeyValue("registeredParameterData","parameter","CHANNEL_COARSE_TUNING",c)}onTuningProgramChange(c){return this.onBusKeyValue("registeredParameterData","parameter","TUNING_PROGRAM_CHANGE",c)}onTuningBankChange(c){return this.onBusKeyValue("registeredParameterData","parameter","TUNING_BANK_SELECT",c)}onModulationDepthChange(c){return this.onBusKeyValue("registeredParameterData","parameter","MODULATION_DEPTH_CHANGE",c)}};return F.MIDIValInput=b,F}var q={},Ce;function Ze(){if(Ce)return q;Ce=1;var t=O&&O.__awaiter||function(f,l,u,d){function p(b){return b instanceof u?b:new u(function(P){P(b)})}return new(u||(u=Promise))(function(b,P){function c(I){try{m(d.next(I))}catch(g){P(g)}}function h(I){try{m(d.throw(I))}catch(g){P(g)}}function m(I){I.done?b(I.value):p(I.value).then(c,h)}m((d=d.apply(f,l||[])).next())})};Object.defineProperty(q,"__esModule",{value:!0}),q.MIDIValOutput=void 0;const e=Ae(),n=we,s=X,o=De,i=Be,r=f=>new Promise(l=>setInterval(l,f));let a=class Xe{constructor(l){this.midiOutput=l,this.defaultChannel=1}send(l){this.midiOutput&&this.midiOutput.send(l)}setChannel(l){this.defaultChannel=l}getChannel(l){return l?l-1:this.defaultChannel-1}static fromInterfaceName(l){return t(this,void 0,void 0,function*(){const d=(yield this.getMidiAccess()).outputs.find(({name:p})=>p===l);if(!d)throw new Error(`${l} not found`);return new Xe(d)})}static getMidiAccess(){return t(this,void 0,void 0,function*(){return yield e.MIDIVal.connect()})}sendNoteOn(l,u,d){return this.send([s.MidiCommand.NoteOn+this.getChannel(d),l,u])}sendNoteOff(l,u){return this.send([s.MidiCommand.NoteOff+this.getChannel(u),l,0])}sendPolyKeyPressure(l,u,d){return this.send([s.MidiCommand.PolyKeyPressure+this.getChannel(d),l,u])}sendControlChange(l,u,d){return this.send([s.MidiCommand.ControlChange+this.getChannel(d),l,u])}sendProgramChange(l,u){return this.send([s.MidiCommand.ProgramChange+this.getChannel(u),l])}sendChannelPressure(l,u){return this.send([s.MidiCommand.ChannelPressure+this.getChannel(u),l])}sendPitchBend(l,u){return this.send(new Uint8Array([s.MidiCommand.PitchBend+this.getChannel(u),...(0,n.fractionToPitchBendAsUints)(l)]))}sendAllSoundOff(l){return this.send([s.MidiCommand.ControlChange+this.getChannel(l),o.MidiControlChange.AllSoundsOff,0])}sendResetAllControllers(l){return this.send([s.MidiCommand.ControlChange+this.getChannel(l),o.MidiControlChange.ResetAllControllers,0])}sendLocalControlOff(l){return this.send([s.MidiCommand.ControlChange+this.getChannel(l),o.MidiControlChange.LocalControlOnOff,0])}sendLocalControlOn(l){return this.send([s.MidiCommand.ControlChange+this.getChannel(l),o.MidiControlChange.LocalControlOnOff,127])}sendAllNotesOff(l){return this.send([s.MidiCommand.ControlChange+this.getChannel(l),o.MidiControlChange.AllNotesOff,0])}sendClockStart(){return this.send([s.MidiCommand.Clock.Start])}sendClockStop(){return this.send([s.MidiCommand.Clock.Stop])}sendClockContinue(){return this.send([s.MidiCommand.Clock.Continue])}sendClockPulse(){return this.send([s.MidiCommand.Clock.Pulse])}sendRPNSelection([l,u],d){this.sendControlChange(o.MidiControlChange.RegisteredParameterNumberMSB,l,d),this.sendControlChange(o.MidiControlChange.RegisteredParameterNumberLSB,u,d)}sendRPDataMSB(l,u){this.sendControlChange(o.MidiControlChange.DataEntryMSB,l,u)}sendRPDataLSB(l,u){this.sendControlChange(o.MidiControlChange.DataEntryLSB,l,u)}incrementRPData(l,u){this.sendControlChange(o.MidiControlChange.DataIncrement,l,u)}decrementRPData(l,u){this.sendControlChange(o.MidiControlChange.DataDecrement,l,u)}sendRPNNull(){}initializeMPE(l,u,d=100){return t(this,void 0,void 0,function*(){this.sendRPNSelection(i.MIDIRegisteredParameters.MPE_CONFIGURATION_MESSAGE,1),yield r(d),this.sendRPDataMSB(l,1),yield r(d),this.sendRPDataMSB(u,16),yield r(d),this.sendRPNNull(),yield r(d)})}setPitchBendSensitivity(l,u,d,p=100){return t(this,void 0,void 0,function*(){this.sendRPNSelection(i.MIDIRegisteredParameters.PITCH_BEND_SENSITIVITY,d),yield r(p),this.sendRPDataMSB(l,d),yield r(p),this.sendRPNNull()})}};return q.MIDIValOutput=a,q}var fe={},de={};Object.defineProperty(de,"__esModule",{value:!0});de.BrowserMIDIOutput=void 0;class wt{constructor(e){this.output=e}send(e){this.output.send(e)}get id(){return this.output.id}get name(){return this.output.name}get manufacturer(){return this.output.manufacturer}}de.BrowserMIDIOutput=wt;var he={},Dt=O&&O.__awaiter||function(t,e,n,s){function o(i){return i instanceof n?i:new n(function(r){r(i)})}return new(n||(n=Promise))(function(i,r){function a(u){try{l(s.next(u))}catch(d){r(d)}}function f(u){try{l(s.throw(u))}catch(d){r(d)}}function l(u){u.done?i(u.value):o(u.value).then(a,f)}l((s=s.apply(t,e||[])).next())})};Object.defineProperty(he,"__esModule",{value:!0});he.BrowserMIDIInput=void 0;class Bt{constructor(e){this.input=e}onMessage(e){return Dt(this,void 0,void 0,function*(){return yield this.input.open(),this.input.addEventListener("midimessage",e),()=>{this.input.removeEventListener("midimessage",e)}})}get id(){return this.input.id}get name(){return this.input.name}get manufacturer(){return this.input.manufacturer}}he.BrowserMIDIInput=Bt;var At=O&&O.__awaiter||function(t,e,n,s){function o(i){return i instanceof n?i:new n(function(r){r(i)})}return new(n||(n=Promise))(function(i,r){function a(u){try{l(s.next(u))}catch(d){r(d)}}function f(u){try{l(s.throw(u))}catch(d){r(d)}}function l(u){u.done?i(u.value):o(u.value).then(a,f)}l((s=s.apply(t,e||[])).next())})};Object.defineProperty(fe,"__esModule",{value:!0});fe.BrowserMIDIAccess=void 0;const z=de,ee=he,Nt=Se;class Mt{constructor(){this.bus=new Nt.Omnibus}onInputConnected(e){return this.bus.on("inputConnected",e)}onInputDisconnected(e){return this.bus.on("inputDisconnected",e)}onOutputConnected(e){return this.bus.on("outputConnected",e)}onOutputDisconnected(e){return this.bus.on("outputDisconnected",e)}connect(e=!1){return At(this,void 0,void 0,function*(){if(!navigator.requestMIDIAccess)throw new Error("requestMIDIAccess not available, make sure you are using MIDI-compatible browser.");this.access=yield navigator.requestMIDIAccess({sysex:e}),this.listenOnStateChange()})}get outputs(){return Array.from(this.access.outputs).map(([,e])=>new z.BrowserMIDIOutput(e))}get inputs(){return Array.from(this.access.inputs).map(([,e])=>new ee.BrowserMIDIInput(e))}getInputById(e){const n=Array.from(this.access.inputs).map(([,s])=>s).find(({id:s})=>s===e);if(!n)throw new Error(`Cannot find input ${e}`);return new ee.BrowserMIDIInput(n)}getOutputById(e){const n=Array.from(this.access.outputs).map(([,s])=>s).find(({id:s})=>s===e);if(!n)throw new Error(`Cannot find output ${e}`);return new z.BrowserMIDIOutput(n)}listenOnStateChange(){this.access.addEventListener("statechange",e=>{if(e.port.type==="input")switch(e.port.state){case"disconnected":this.bus.trigger("inputDisconnected",new ee.BrowserMIDIInput(e.port));break;case"connected":this.bus.trigger("inputConnected",new ee.BrowserMIDIInput(e.port));break}else switch(e.port.state){case"disconnected":this.bus.trigger("outputDisconnected",new z.BrowserMIDIOutput(e.port));break;case"connected":this.bus.trigger("outputConnected",new z.BrowserMIDIOutput(e.port));break}})}}fe.BrowserMIDIAccess=Mt;var Ve;function Et(){return Ve||(Ve=1,function(t){var e=O&&O.__awaiter||function(a,f,l,u){function d(p){return p instanceof l?p:new l(function(b){b(p)})}return new(l||(l=Promise))(function(p,b){function P(m){try{h(u.next(m))}catch(I){b(I)}}function c(m){try{h(u.throw(m))}catch(I){b(I)}}function h(m){m.done?p(m.value):d(m.value).then(P,c)}h((u=u.apply(a,f||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.MIDIVal=t.matchesConfig=void 0;const n=Je(),s=Ze(),o=fe,i=(a,f)=>Object.keys(f).reduce((l,u)=>{const d=f[u];return typeof d=="string"?l&&a[u]===d:l&&d.test(a[u])},!0);t.matchesConfig=i;class r{static configureAccessObject(f){this.isSetupComplete=!1,this.accessObject=f}static onInputDeviceConnected(f,l=!1){return e(this,void 0,void 0,function*(){return l&&this.accessObject.inputs.forEach(f),this.accessObject.onInputConnected(f)})}static onInputDeviceWithConfigConnected(f,l,u=!1){return e(this,void 0,void 0,function*(){return this.onInputDeviceConnected(d=>{(0,t.matchesConfig)(d,f)&&l(new n.MIDIValInput(d))},u)})}static onOutputDeviceWithConfigConnected(f,l,u=!1){return e(this,void 0,void 0,function*(){return this.onOutputDeviceConnected(d=>{(0,t.matchesConfig)(d,f)&&l(new s.MIDIValOutput(d))},u)})}static onOutputDeviceConnected(f,l=!1){return e(this,void 0,void 0,function*(){return l&&this.accessObject.outputs.forEach(f),this.accessObject.onOutputConnected(f)})}static onInputDeviceDisconnected(f){return e(this,void 0,void 0,function*(){return this.accessObject.onInputDisconnected(f)})}static onOutputDeviceDisconnected(f){return e(this,void 0,void 0,function*(){return this.accessObject.onOutputDisconnected(f)})}static fromMIDIInput(f){return new n.MIDIValInput(f)}static fromMIDIOutput(f){return new s.MIDIValOutput(f)}static connect(){return e(this,void 0,void 0,function*(){return yield this.setupDeviceWatchers(),this.accessObject})}static setupDeviceWatchers(){return e(this,void 0,void 0,function*(){this.isSetupComplete||(this.isSetupComplete=!0,this.accessObject||(this.accessObject=new o.BrowserMIDIAccess),yield this.accessObject.connect())})}}r.isSetupComplete=!1,t.MIDIVal=r}(ye)),ye}var Re;function Ae(){return Re||(Re=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MIDIValOutput=t.MIDIValInput=t.MIDIVal=void 0;const e=Et();Object.defineProperty(t,"MIDIVal",{enumerable:!0,get:function(){return e.MIDIVal}});const n=Je();Object.defineProperty(t,"MIDIValInput",{enumerable:!0,get:function(){return n.MIDIValInput}});const s=Ze();Object.defineProperty(t,"MIDIValOutput",{enumerable:!0,get:function(){return s.MIDIValOutput}})}(be)),be}var x=Ae();const Tt="_selector_jy1u4_1",Ct={selector:Tt},Vt=E("<div><label>MIDI In</label><select>"),Rt=E("<option>"),Lt=({onSelect:t})=>{const[e,n]=K([]),[s,o]=K(null);x.MIDIVal.connect().then(r=>{setTimeout(()=>{n(r.inputs.reverse()),r.onInputConnected(()=>{n(r.inputs)}),r.onInputDisconnected(()=>{n(r.inputs)})},100)});const i=r=>{console.log(r);const a=e().find(f=>f.id==r);a&&(t(new x.MIDIValInput(a)),o(a))};return Ge(()=>{!s()&&e().length&&i(e()[0].id)}),(()=>{const r=Vt(),a=r.firstChild,f=a.nextSibling;return f.addEventListener("change",l=>i(l.target.value)),D(f,w(xe,{get each(){return e()},children:l=>(()=>{const u=Rt();return D(u,()=>l.name),B(()=>u.value=l.id),u})()})),B(()=>k(r,Ct.selector)),B(()=>f.value=s()?.id),r})()},kt="_layout_1fxln_1",$t="_layoutColumn_1fxln_6",Le={layout:kt,layoutColumn:$t},jt=E("<div>"),ke=({children:t,direction:e})=>(()=>{const n=jt();return D(n,t),B(()=>k(n,`${Le.layout} ${e==="column"?Le.layoutColumn:""}`)),n})(),Gt=E("<div>"),Oe=({children:t,class:e})=>(()=>{const n=Gt();return k(n,e),D(n,t),n})(),Kt="_inspectTable_14o8c_1",Ut="_mainRow_14o8c_23",Ft="_logo_14o8c_27",qt="_logoRow_14o8c_31",te={inspectTable:Kt,mainRow:Ut,logo:Ft,logoRow:qt},Ht="/assets/midival-logo-eef6d552.svg",xt="_messageType_d84af_1",Wt={messageType:xt},Yt=E("<span>"),Qt=({messageType:t})=>(()=>{const e=Yt();return We(e,"data-type",t),D(e,t),B(()=>k(e,Wt.messageType)),e})(),Jt=E("<tr><td></td><td></td><td></td><td>"),Xt=E("<img>"),Zt=E("<table><thead><tr><th>Type</th><th>Data 1</th><th>Data 2</th><th>Channel</th></tr></thead><tbody>"),zt=({message:t})=>(()=>{const e=Jt(),n=e.firstChild,s=n.nextSibling,o=s.nextSibling,i=o.nextSibling;return D(n,w(Qt,{get messageType(){return t.type}})),D(s,()=>t.data1),D(o,()=>t.data2),D(i,()=>t.channel),e})(),en=({})=>{const[t,e]=K(null),[n,s]=K([]),o=i=>{s([i,...n()])};return Ge(()=>{const i=t();if(i)return i.onAllNoteOn(r=>{o({type:"noteOn",channel:r.channel,data1:r.data1,data2:r.data2,readable:`[NoteOn] ${r.note} ${r.velocity}`})}),i.onAllControlChange(r=>{o({type:"CC",channel:r.channel,data1:r.control,data2:r.value,readable:`[CC] ${r.control} (${r.value})`})}),i.onChannelPressure(r=>{o({type:"ChannelPressure",channel:r.channel,data1:r.data1,data2:r.data2,readable:`[Pressure] ${r.data1} ${r.data2}`})}),i.onAllNoteOff(r=>{o({type:"noteOff",channel:r.channel,data1:r.data1,data2:r.data2,readable:`[NoteOff] ${r.note} ${r.velocity}`})}),()=>{console.log("Change ?")}}),w(ke,{direction:"column",get children(){return[w(ke,{get children(){return[w(Oe,{get class(){return te.logoRow},get children(){return[(()=>{const i=Xt();return We(i,"src",Ht),B(()=>k(i,te.logo)),i})(),"INSPECT"]}}),w(Oe,{get children(){return w(Lt,{onSelect:e})}})]}}),w(Oe,{get class(){return te.mainRow},get children(){const i=Zt(),r=i.firstChild,a=r.nextSibling;return D(a,w(xe,{get each(){return n()},children:f=>w(zt,{message:f})})),B(()=>k(i,te.inspectTable)),i}})]}})},tn=E("<div>"),nn=()=>{const[t,e]=K(null);return x.MIDIVal.connect().then(n=>{const s=n.inputs.find(i=>i.name==="Peak"),o=n.outputs.find(i=>i.name==="Peak");s&&o&&e({midiIn:new x.MIDIValInput(s),midiOut:new x.MIDIValOutput(o)})}),t};function sn(){return nn(),(()=>{const t=tn();return D(t,w(en,{})),B(()=>k(t,mt.App)),t})()}const rn=document.getElementById("root");at(()=>w(sn,{}),rn);
